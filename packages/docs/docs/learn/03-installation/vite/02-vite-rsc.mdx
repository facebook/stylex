---
# Copyright (c) Meta Platforms, Inc. and affiliates.
#
# This source code is licensed under the MIT license found in the
# LICENSE file in the root directory of this source tree.
sidebar_position: 2
---

# Vite + React (RSC)

[`examples/example-vite-rsc`](https://github.com/facebook/stylex/tree/main/examples/example-vite-rsc) layers
`@vitejs/plugin-rsc` on top of React while `@stylexjs/unplugin` compiles StyleX
for each environment (RSC, SSR, client). Every build output receives a single
CSS asset with aggregated StyleX styles.

## Vite configuration

```ts
// vite.config.ts
import rsc from '@vitejs/plugin-rsc';
import react from '@vitejs/plugin-react';
import { defineConfig } from 'vite';
import stylex from '@stylexjs/unplugin';

export default defineConfig({
  plugins: [rsc(), react(), stylex.vite()],
  environments: {
    rsc: {
      build: { rollupOptions: { input: { index: './src/framework/entry.rsc.tsx' } } },
    },
    ssr: {
      build: { rollupOptions: { input: { index: './src/framework/entry.ssr.tsx' } } },
    },
    client: {
      build: { rollupOptions: { input: { index: './src/framework/entry.browser.tsx' } } },
    },
  },
});
```

- `stylex.vite()` runs for every environment, so each bundle gets the correct
  CSS appended.
- Add options such as `useCSSLayers` if desired.

## CSS entry and dev injection

- Import `src/index.css` from the framework root so each environment emits a CSS
  asset for StyleX to append to.

- Add a shared helper that renders the StyleX stylesheet link and triggers HMR
  from a component:

  ```tsx
  // src/DevStyleXInject.tsx
  'use client';
  import { useEffect } from 'react';

  function DevStyleXInjectImpl() {
    useEffect(() => {
      if (import.meta.env.DEV) {
        import('virtual:stylex:runtime');
      }
    }, []);
    return <link rel="stylesheet" href="/virtual:stylex.css" />;
  }

  export function DevStyleXInject({ cssHref }: { cssHref: string }) {
    return import.meta.env.DEV ? (
      <DevStyleXInjectImpl />
    ) : (
      <link rel="stylesheet" href={cssHref} />
    );
  }
  ```

  Render `<DevStyleXInject cssHref="/stylex.css" />` in your HTML shell (for
  example inside `src/root.tsx`). Set `cssHref` to the built CSS path (use the
  `stylex.css` fallback or look it up from Viteâ€™s manifest).

  ```tsx
  // src/root.tsx (excerpt)
  import { DevStyleXInject } from './DevStyleXInject';

  export function Root(props: { url: URL }) {
    return (
      <html lang="en">
        <head>
          <DevStyleXInject cssHref="/stylex.css" />
        </head>
        <body>
          <App {...props} />
        </body>
      </html>
    );
  }
  ```
